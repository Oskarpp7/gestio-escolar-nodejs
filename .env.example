# === VARIABLES D'ENTORN - CONFIGURACIÓ COMPLETA ===
# Copia aquest fitxer a .env i configura les variables segons el teu entorn

# === CONFIGURACIÓ SERVIDOR ===
NODE_ENV=development
PORT=3000
HOST=localhost
DOMAIN=localhost:3000

# === BASE DE DADES ===
# PostgreSQL (Producció)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=gestio_escolar
DB_USER=your_database_user
DB_PASS=your_database_password
DB_DIALECT=postgres

# SQLite (Desenvolupament) - Descomenta per usar SQLite
# DB_DIALECT=sqlite
# DB_STORAGE=database/dev.sqlite3

# === SEGURETAT JWT ===
JWT_SECRET=your_super_secret_jwt_key_change_this_in_production_min_32_chars
JWT_EXPIRES_IN=1h
JWT_REFRESH_SECRET=your_refresh_token_secret_different_from_jwt_secret
JWT_REFRESH_EXPIRES_IN=7d

# === CONFIGURACIÓ EMAIL (SMTP) ===
# Per reset passwords i notificacions
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@domain.com
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@moutserveis.com
EMAIL_FROM_NAME=MouT Serveis

# === LOGGING ===
LOG_LEVEL=info
LOG_FILE=logs/app.log
LOG_ERROR_FILE=logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# === FITXERS I UPLOADS ===
UPLOAD_DIR=uploads
MAX_FILE_SIZE=5MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx

# === CONFIGURACIÓ CORS ===
# Dominis permesos per CORS (separats per comes)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://app.moutserveis.com

# === CONFIGURACIÓ SESSIÓ ===
SESSION_SECRET=your_session_secret_key_here
SESSION_MAX_AGE=86400000

# === CONFIGURACIÓ REDIS (Opcional) ===
# Per sessions i cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# === CONFIGURACIÓ SOCKET.IO ===
SOCKET_CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://app.moutserveis.com

# === CONFIGURACIÓ PAGAMENTS (Opcional) ===
# Stripe per pagaments online
STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# === CONFIGURACIÓ NOTIFICACIONS PUSH (Opcional) ===
# Firebase per notificacions mòbil
FIREBASE_SERVER_KEY=your_firebase_server_key
FIREBASE_SENDER_ID=your_firebase_sender_id

# === CONFIGURACIÓ BACKUP ===
# Per backups automàtics de BD
BACKUP_DIR=backups
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# === CONFIGURACIÓ DEVELOPMENT ===
# Només per desenvolupament
DEBUG_QUERIES=false
SEED_SAMPLE_DATA=true
DEV_EMAIL_CONSOLE=true

# === CONFIGURACIÓ PRODUCCIÓ ===
# SSL i certificats
SSL_KEY=/path/to/ssl/private.key
SSL_CERT=/path/to/ssl/certificate.crt

# Monitoring i alerts
MONITORING_EMAIL=admin@moutserveis.com
ERROR_ALERTS=true

# === CONFIGURACIÓ MULTI-TENANT ===
# Configuració per defecte de nous tenants
DEFAULT_TENANT_SETTINGS='{
  "menjador_fixe": 7.54,
  "menjador_esporadic": 3.86,
  "acollida_hora": 4.50,
  "beca_bc70_percent": 30,
  "beca_bc100_percent": 100,
  "currency": "EUR",
  "timezone": "Europe/Madrid",
  "language": "ca"
}'

# === CONFIGURACIÓ PREUS VARIABLES ===
# Sistema de preus flexible per escola
ENABLE_VARIABLE_PRICING=true
ALLOW_TENANT_PRICING_CONFIG=true

# === CONFIGURACIÓ FACTURACIÓ ===
# Per generació automàtica de factures
INVOICE_PREFIX=FAC
INVOICE_COUNTER_START=1
INVOICE_DUE_DAYS=30
TAX_RATE=21

# === CONFIGURACIÓ REPORTS ===
# Per generació d'informes
REPORTS_DIR=reports
REPORTS_CACHE_TTL=3600
PDF_GENERATOR=puppeteer

# === CONFIGURACIÓ INTEGRACIÓ EXTERNA ===
# APIs externes (opcional)
EXTERNAL_API_KEY=your_external_api_key
EXTERNAL_API_URL=https://api.external-service.com

# === CONFIGURACIÓ TESTING ===
# Variables específiques per tests
TEST_DB_NAME=gestio_escolar_test
TEST_PORT=3001
TEST_JWT_SECRET=test_jwt_secret_key

# === CONFIGURACIÓ DEPLOY ===
# Per deploy automàtic
DEPLOY_BRANCH=main
DEPLOY_HOOK_URL=https://api.github.com/repos/Oskarpp7/gestio-escolar-nodejs/dispatches

# === EXEMPLE CONFIGURACIONS PER ENTORN ===

# DESENVOLUPAMENT LOCAL:
# NODE_ENV=development
# DB_DIALECT=sqlite
# DB_STORAGE=database/dev.sqlite3
# LOG_LEVEL=debug
# DEV_EMAIL_CONSOLE=true

# STAGING:
# NODE_ENV=staging
# DOMAIN=staging.moutserveis.com
# DB_NAME=gestio_escolar_staging

# PRODUCCIÓ:
# NODE_ENV=production
# DOMAIN=app.moutserveis.com
# LOG_LEVEL=warn
# ERROR_ALERTS=true
